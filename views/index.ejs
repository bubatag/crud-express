<%- include('partials/navbar.ejs') %>
<%- include('partials/header.ejs') %>
</head>

<div class="container">

  <!-- Cards do topo -->
  <div class="top-cards">
    <div class="card card1" id="card1">
      <div class="card-header">
        <h2 id="titulo1">Total de Animais</h2>
        <img src="/images/buffalo.png" alt="ícone animais" class="icone-card" width="10%">
      </div>
      <p id="texto1">
        <%= totalAnimais %>
      </p>
    </div>

    <div class="card card2" id="card2">
      <div class="card-header">
        <h2 id="titulo2">Temperatura Média</h2>
        <img src="/images/temperatura.png" alt="ícone temperatura" class="icone-card" width="10%">
      </div>
      <p id="texto2">
        <%= mediaTemperatura %> °C
      </p>
    </div>

    <div class="card card3" id="card3">
      <div class="card-header">
        <h2 id="titulo3">Total de Coleiras</h2>
        <img src="/images/coleira.png" alt="ícone coleiras" class="icone-card" width="10%">
      </div>
      <p id="texto3">
        <%= totalColeiras %>
      </p>
    </div>
  </div>

  <!-- Gráficos -->
  <div class="middle-section">
    <div class="left-graph">
      <canvas id="multiAxisChart" width="400"></canvas>

      <script>
        const ctxLine = document.getElementById('multiAxisChart').getContext('2d');
        new Chart(ctxLine, {
          type: 'line',
          data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            datasets: [
              {
                label: 'Temperatura (°C)',
                data: [36.5, 37.0, 38.2, 36.9, 37.4, 36.7],
                yAxisID: 'y1',
                borderColor: 'rgb(255, 99, 132)',
                tension: 0.3,
                backgroundColor: '#F2C200',
                borderWidth: 2
              },
              {
                label: 'Batimentos (bpm)',
                data: [70, 72, 74, 73, 75, 71],
                yAxisID: 'y2',
                borderColor: '#90A955',
                tension: 0.3,
                backgroundColor: '#06D001',
                borderWidth: 2
              }
            ]
          },
          options: {
            responsive: true,
            interaction: {
              mode: 'index',
              intersect: false
            },
            stacked: false,
            plugins: {
              title: {
                display: true,
                text: 'Temperatura x Batimentos',
                color: 'white',
                font: {
                  size: 16,
                  weight: 'bold'
                }
              },
              legend: {
                labels: {
                  color: 'white'
                }
              }
            },
            scales: {
              y1: {
                type: 'linear',
                position: 'left',
                title: {
                  display: true,
                  text: 'Temperatura (°C)',
                  color: 'white',
                  font: {
                    size: 15,
                    weight: 'bold'
                  }
                },
                grid: {
                  color: 'rgba(255, 255, 255, 0.3)'
                },
                ticks: {
                  color: 'white'
                }
              },
              y2: {
                type: 'linear',
                position: 'right',
                title: {
                  display: true,
                  text: 'Batimentos (bpm)',
                  color: 'white',
                  font: {
                    size: 15,
                    weight: 'bold'
                  }
                },
                grid: {
                  color: 'rgba(255, 255, 255, 0.3)'
                },
                ticks: {
                  color: 'white'
                }
              },
              x: {
                ticks: {
                  color: 'white'
                },
                grid: {
                  color: 'rgba(255, 255, 255, 0.3)'
                }
              }
            }
          }
        });
      </script>
    </div>

    <div class="right-graph">
      <canvas id="myChart"></canvas>
    </div>

    <script>
      const ctxBar = document.getElementById('myChart').getContext('2d');

      new Chart(ctxBar, {
        type: 'bar',
        data: {
          labels: ['Janeiro', 'Fevereiro', 'Março', 'Abril'],
          datasets: [{
            label: 'Exemplo de Dados',
            data: [12, 19, 3, 5],
            backgroundColor: ['#4caf50', '#2196f3', '#ff9800', '#e91e63']
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: {
              labels: {
                color: 'white'
              }
            }
          },
          scales: {
            x: {
              ticks: { color: 'white' }
            },
            y: {
              ticks: { color: 'white' }
            }
          }
        }
      });
    </script>
  </div>

</div>

<%- include('partials/footer.ejs') %>